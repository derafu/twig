{# templates/components/block-video-grid.html.twig #}
<div class="derafu-block-video-grid {{ class }}
    {% if margin_top is defined %}mt-{{ margin_top }}{% endif %}
    {% if margin_bottom is defined %}mb-{{ margin_bottom }}{% endif %}"
    id="{{ id }}">
    <div class="row g-4">
        {% for video in videos %}
            <div class="col-sm-6 {% if cols == 1 %}col-lg-12
                {% elseif cols == 2 %}col-lg-6
                {% elseif cols == 3 %}col-lg-4
                {% elseif cols == 4 %}col-lg-3
                {% else %}col-lg-2{% endif %}">

                <div class="derafu-block-video-grid__card
                    {% if video.title is empty and video.description is empty %}border border-0{% endif %}"
                >
                    <div class="derafu-block-video-grid__media">
                        <iframe
                            class="derafu-block-video-grid__player"
                            src="{{ video.video|replace({'watch?v=': 'embed/'}) }}"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen>
                        </iframe>
                    </div>

                    {% if video.title or video.description %}
                        <div class="derafu-block-video-grid__content">
                            {% if video.title %}
                                <h3 class="derafu-block-video-grid__title">{{ video.title }}</h3>
                            {% endif %}

                            {% if video.description %}
                                <div class="derafu-block-video-grid__description">
                                    {{ video.description|raw }}
                                </div>
                            {% endif %}
                        </div>
                    {% endif %}

                    {% if video.button_text %}
                        <div class="derafu-block-video-grid__footer">
                            <a href="{{ video.button_url }}" class="derafu-block-video-grid__button btn {% if video.button_url is empty %}disabled{% endif %}" role="button">
                                {{ video.button_text }}
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>
</div>
